<div ng-controller="SearchCtrl">
	<h1>Search for articles and course packs</h1>

	Articles in database: <%= @count %>

	<%= form_tag("/search", method: "get") do %>
		<p>
		  <%= label_tag(:q, "Search for:") %>
		  <%= text_field_tag(:q, (params[:q] ? params[:q] : "")) %>
		  <%= submit_tag("Search") %>
		</p>
		
	<% end %>

	<%= form_tag("/search", method: "get") do %>
		<%= submit_tag("List All") %>
	<% end %>

	<br>
	<p>
		<% if params[:q] == "" %>
			<font color='red'>
				<b><%= "Please enter a search term." %></b>
			</font>
		<% elsif params[:q] and params[:category].nil? %>
			<font color='red'>
				<b><%= "Please select a search category." %></b>
			</font>
		<% elsif params[:q] and (@articles.nil? or @articles.count == 0)%>
			<b><%= "No articles found." %></b>
		<% elsif @articles %>
			<b><%= @articles.count.to_s + " article(s) found." %></b>

			<h2>Results:</h2>

		<% end %>

		<input type='text' ng-model='search_input'>
		<%= render 'shared/search' %>
	</p>
</div>